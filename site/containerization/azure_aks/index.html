<!-- Elements added to main will be displayed on all pages -->

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.1">
    
    
      
        <title>Deploy DX Container to Microsoft Azure Kubernetes Service \(AKS\) - HCL Digital Experience</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e8d9bf0c.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deploy-dx-container-to-microsoft-azure-kubernetes-service-aks" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="HCL Digital Experience" class="md-header__button md-logo" aria-label="HCL Digital Experience" data-md-component="logo">
      
  <img src="../../assets/dx_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HCL Digital Experience
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Deploy DX Container to Microsoft Azure Kubernetes Service \(AKS\)
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://rohinimuralidharan.github.io/dx_denovo/site/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    rohinimuralidharan/dx_anew
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../overview/intr_new95/" class="md-tabs__link">
        Overview
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../whatsnew/container_update_releases/" class="md-tabs__link">
        What's new?
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../deployment/" class="md-tabs__link md-tabs__link--active">
        DX on Containers
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../dxtraditional" class="md-tabs__link">
      DX Traditional
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../corecapabilities" class="md-tabs__link">
      Working with DX
    </a>
  </li>

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../allnewfeatures/digital_asset_mgmt/dam_restore_image_helm/" class="md-tabs__link">
        Latest features
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="HCL Digital Experience" class="md-nav__button md-logo" aria-label="HCL Digital Experience" data-md-component="logo">
      
  <img src="../../assets/dx_logo.png" alt="logo">

    </a>
    HCL Digital Experience
  </label>
  
    <div class="md-nav__source">
      <a href="https://rohinimuralidharan.github.io/dx_denovo/site/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    rohinimuralidharan/dx_anew
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          Overview
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Overview" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Overview
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/intr_new95/" class="md-nav__link">
        What's new in HCL Digital Experience 9.5?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/intr_ovr/" class="md-nav__link">
        Product capabilities
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          What's new?
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="What's new?" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          What's new?
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/container_update_releases/" class="md-nav__link">
        Cumulative Fixes for DX Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2">
          CF19
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CF19" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          CF19
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/newcf201/" class="md-nav__link">
        What's new in Container Update CF201?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/newcf200/" class="md-nav__link">
        What's new in Container Update CF200?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/newcf199/" class="md-nav__link">
        What's new in Container Update CF199?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/newcf198/" class="md-nav__link">
        What's new in Container Update CF198?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/newcf197/" class="md-nav__link">
        What's new in Container Update CF197?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/newcf196/" class="md-nav__link">
        What's new in Container Update CF196?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/newcf195/" class="md-nav__link">
        What's new in Container Update CF195?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/newcf194/" class="md-nav__link">
        What's new in Container Update CF194?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/newcf193/" class="md-nav__link">
        What's new in Container Update CF193?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/newcf192/" class="md-nav__link">
        What's new in Container Update CF192?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/newcf191/" class="md-nav__link">
        What's new in Container Update CF191?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/newcf19/" class="md-nav__link">
        What's new in Container Update CF19?
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_3">
          CF18
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CF18" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          CF18
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/newcf184/" class="md-nav__link">
        What's new in Container Update CF184?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/newcf183/" class="md-nav__link">
        What's new in Container Update CF183?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/newcf182/" class="md-nav__link">
        What's new in Container Update CF182?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/new_cf181/" class="md-nav__link">
        What's new in Container Update CF181?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/new_cf18/" class="md-nav__link">
        What's new in CF18?
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_4">
          CF17
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CF17" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          CF17
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/new_cf173/" class="md-nav__link">
        What's new in Container Update CF173?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/new_cf172/" class="md-nav__link">
        What's new in Container Update CF172?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/new_cf171/" class="md-nav__link">
        What's new in Container Update CF171?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../whatsnew/new_cf17/" class="md-nav__link">
        What's new in CF17? 9.5
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          DX on Containers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="DX on Containers" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          DX on Containers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/" class="md-nav__link">
        Digital Experience on containerized platforms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        Containerization overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../c_kubesupportstatement/" class="md-nav__link">
        Container platform support matrix
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" type="checkbox" id="__nav_4_4" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_4">
          Docker images
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Docker images" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Docker images
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../docker/docker_overview/" class="md-nav__link">
        Digital Experience on Docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../docker/docker/" class="md-nav__link">
        Docker image list
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../docker/docker_image_deployment/" class="md-nav__link">
        Docker image deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../docker/docker_compose/" class="md-nav__link">
        Docker image deployment using Docker Compose
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" type="checkbox" id="__nav_4_5" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_5">
          Deploying using Helm charts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Deploying using Helm charts" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          Deploying using Helm charts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/helm/" class="md-nav__link">
        Helm-based deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5_2" type="checkbox" id="__nav_4_5_2" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_5_2">
          DX Helm architecture
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="DX Helm architecture" data-md-level="3">
        <label class="md-nav__title" for="__nav_4_5_2">
          <span class="md-nav__icon md-icon"></span>
          DX Helm architecture
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/helm_overview/" class="md-nav__link">
        Overview of the Helm architecture
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/core_interactions_kubernetes/" class="md-nav__link">
        DX 9.5 Core Interactions with Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/deploy_applications_using_helm/" class="md-nav__link">
        Deploying DX 9.5 applications to container platforms using Helm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/persistent_volumes_helm/" class="md-nav__link">
        PersistentVolumes and related operations considerations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/configure_deployment_helm/" class="md-nav__link">
        Configuring DX 9.5 deployments to container platforms using Helm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/container_scaling_helm/" class="md-nav__link">
        Scaling DX 9.5 container deployments using Helm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/dam_persistence_architecture/" class="md-nav__link">
        Digital Asset Management persistence architecture
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/helm_deployment/" class="md-nav__link">
        Deploying on containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5_4" type="checkbox" id="__nav_4_5_4" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_5_4">
          Planning
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Planning" data-md-level="3">
        <label class="md-nav__title" for="__nav_4_5_4">
          <span class="md-nav__icon md-icon"></span>
          Planning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/planning/docker/" class="md-nav__link">
        Docker image list
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/planning/limitations_requirements/" class="md-nav__link">
        Containerization requirements and limitations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/planning/helm_planning_deployment/" class="md-nav__link">
        Planning your container deployment using Helm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/planning/helm_persistent_volume_claims/" class="md-nav__link">
        Configure PersistentVolumeClaims (PVCs)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/planning/helm_configure_networking/" class="md-nav__link">
        Configure networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../helm/planning/helm_additional_tasks/" class="md-nav__link">
        Additional Helm tasks
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../dxtraditional" class="md-nav__link">
        DX Traditional
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../corecapabilities" class="md-nav__link">
        Working with DX
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7">
          Latest features
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Latest features" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Latest features
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1" type="checkbox" id="__nav_7_1" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_1">
          Digital asset mgmt
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Digital asset mgmt" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_1">
          <span class="md-nav__icon md-icon"></span>
          Digital asset mgmt
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../allnewfeatures/digital_asset_mgmt/dam_restore_image_helm/" class="md-nav__link">
        Restore Digital Asset Management image to previous version
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../allnewfeatures/digital_asset_mgmt/dam_restore_image_operator/" class="md-nav__link">
        Restore Digital Asset Management image to previous version
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../allnewfeatures/digital_asset_mgmt/digital_asset_mgmt_overview/" class="md-nav__link">
        HCL Digital Asset Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../allnewfeatures/digital_asset_mgmt/helm_dam_backup_restore_image/" class="md-nav__link">
        Back up and restore a DAM image
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../allnewfeatures/digital_asset_mgmt/manage_collections/" class="md-nav__link">
        Manage collections
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../allnewfeatures/digital_asset_mgmt/operator_dam_backup_restore_image/" class="md-nav__link">
        Back up and restore a DAM image
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2" type="checkbox" id="__nav_7_2" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_2">
          Practitioner studio
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Practitioner studio" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          Practitioner studio
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../allnewfeatures/practitioner_studio/enable_prac_studio/" class="md-nav__link">
        How to enable Practitioner Studio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../allnewfeatures/practitioner_studio/practitionerstudio_overview/" class="md-nav__link">
        Practitioner Studio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../allnewfeatures/practitioner_studio/working_prac_studio/" class="md-nav__link">
        Working with Practitioner Studio
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_3" type="checkbox" id="__nav_7_3" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3">
          Woodburn studio
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Woodburn studio" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_3">
          <span class="md-nav__icon md-icon"></span>
          Woodburn studio
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../allnewfeatures/woodburn_studio/woodburn_studio/" class="md-nav__link">
        The Woodburn Studio demo site
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#about-this-task" class="md-nav__link">
    About this task
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-hcl-digital-experience-dx-95-cf192-and-later-version" class="md-nav__link">
    Deploying HCL Digital Experience (DX) 9.5 CF192 and later version
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dx-container-image-management" class="md-nav__link">
    DX-Container Image Management
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dx-deployment-using-dxctl" class="md-nav__link">
    DX-Deployment using dxctl
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate-tls-certificate" class="md-nav__link">
    Generate TLS Certificate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update-the-hcl-digital-experience-dx-95-azure-aks-deployment-to-later-hcl-dx-95-container-update-releases" class="md-nav__link">
    Update the HCL Digital Experience (DX) 9.5 Azure AKS deployment to later HCL DX 9.5 Container Update releases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delete-the-hcl-digital-experience-dx-95-cf192-and-later-release-azure-aks-deployment" class="md-nav__link">
    Delete the HCL Digital Experience (DX) 9.5 CF192 and later release Azure AKS deployment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-hcl-digital-experience-dx-95-cf191-and-earlier-version" class="md-nav__link">
    Deploying HCL Digital Experience (DX) 9.5 CF191 and earlier version
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-the-hcl-digital-experience-dx-95-cf182-and-later-core-images" class="md-nav__link">
    Install the HCL Digital Experience (DX) 9.5 CF182 and later core images
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-deploy-the-openldap-experience-api-content-composer-and-digital-asset-management-components-to-microsoft-aks" class="md-nav__link">
    (Optional) Deploy the OpenLDAP, Experience API, Content Composer, and Digital Asset Management components to Microsoft AKS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update-the-hcl-digital-experience-dx-95-azure-aks-deployment" class="md-nav__link">
    Update the HCL Digital Experience (DX) 9.5 Azure AKS deployment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delete-the-hcl-digital-experience-dx-95-azure-aks-deployment" class="md-nav__link">
    Delete the HCL Digital Experience (DX) 9.5 Azure AKS deployment
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="deploy-dx-container-to-microsoft-azure-kubernetes-service-aks">Deploy DX Container to Microsoft Azure Kubernetes Service (AKS)</h1>
<p>Learn how to deploy HCL Digital Experience (DX) 9.5 CF182 and later container release along with Ambassador to Kubernetes, as verified in Microsoft Azure Kubernetes Service (AKS).</p>
<h2 id="about-this-task">About this task</h2>
<p>Follow these steps to deploy HCL Digital Experience 9.5 CF182 and later container release along with Ambassador to Kubernetes, as verified in <a href="https://azure.microsoft.com/en-us/services/kubernetes-service/">Microsoft Azure Kubernetes Service (AKS)</a>. This deployment relies heavily on Kubernetes Operators for full functionality.</p>
<p>If deploying HCL DX 9.5 Container Update CF191 and earlier, view the instructions to deploy using script commands instead of the dxctl tool as described below in this Help Center section.</p>
<p><strong>Note:</strong> Reference the latest HCL DX 9.5 Container Release and Update file list in the <a href="../containerization/docker.html">Docker deployment</a> topic.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>Prior to using the procedure below, it is assumed that the HCL DX Administrator is generally experienced in using Kubernetes. Additionally, the DX Administrator must have the appropriate access to the target environment. If not, following are some preliminary steps that must be taken.</p>
<ol>
<li>
<p>Setup <code>KUBECONFIG</code> to refer to the target server. This ensures any <code>kubectl</code> commands executed locally affect the target environment.</p>
<p><strong>Example:</strong></p>
<p><img alt="Use kubectl get to get appropriate information from the artifacts running in the target Kubernetes environment" src="../images/kubectl%20get_artifacts.png" /></p>
</li>
<li>
<p>Use <code>kubectl get {pods, pv, storageclass}</code> to get appropriate information from the artifacts running in the target Kubernetes environment.</p>
</li>
<li>The following tools must be installed on a machine other than the Portal server:<ul>
<li>Docker</li>
<li>Microsoft Azure CLI</li>
<li>If deploying Digital Experience Container Update CF192 and later, the <a href="../containerization/dxtools_dxctl.html">dxctl tool</a> is used to install and configure the deployment</li>
</ul>
</li>
<li>
<p>Volume requirement:</p>
<ul>
<li>It requires an AccessMode of <strong>ReadWriteMany</strong>.</li>
<li>It requires a minimum of <strong>40 GB</strong>, with the default request set to <strong>100 GB</strong>.</li>
<li>
<p>RECLAIM POLICY = <strong>Retain</strong></p>
<p><strong>Note:</strong> HCL Digital Experience is input-output (I/O) intensive and requires a high performing file system for optimization.</p>
</li>
</ul>
</li>
<li>
<p>Azure container registry (For tagging and pushing).</p>
</li>
</ol>
<h2 id="deploying-hcl-digital-experience-dx-95-cf192-and-later-version">Deploying HCL Digital Experience (DX) 9.5 CF192 and later version</h2>
<p>Follow these steps to deploy the HCL Digital Experience (DX) 9.5 CF192 and later container release to the Microsoft Azure AKS platform:</p>
<ol>
<li>
<p>Download the HCL Digital Experience Container Update CF192 and later release container product and extract it to your local file system. The file system can be on a local workstation or cloud platform.</p>
<p>If deploying HCL DX 9.5 Container Update CF192 release, the image and package names are as follows:</p>
<p><strong>CF192-core.zip</strong> files:</p>
<ul>
<li>```
HCL DX notices V9.5 CF192.txt</li>
</ul>
</li>
</ol>
<pre><code>
    -   ```
dxclient_v1.2.0_20210305-1758.zip
</code></pre>
<pre><code>-   ```
</code></pre>
<p>hcl-dx-ambassador-image-154.tar.gz</p>
<pre><code>
    -   ```
hcl-dx-cloud-operator-image-v95_CF192_20210305-2309.tar.gz
</code></pre>
<pre><code>-   ```
</code></pre>
<p>hcl-dx-cloud-scripts-v95_CF192_20210305-2309.zip</p>
<pre><code>
    -   ```
hcl-dx-content-composer-image-v1.6.0_20210305-1756.tar.gz
</code></pre>
<pre><code>-   ```
</code></pre>
<p>hcl-dx-core-image-v95_CF192_20210305-1758.tar.gz</p>
<pre><code>
    -   ```
hcl-dx-digital-asset-management-operator-image-v95_CF192_20210305-1757.tar.gz
</code></pre>
<pre><code>-   ```
</code></pre>
<p>hcl-dx-digital-asset-manager-image-v1.6.0_20210305-1802.tar.gz</p>
<pre><code>
    -   ```
hcl-dx-experience-api-sample-ui-v0.2.0.20210305-1805.zip
</code></pre>
<pre><code>-   ```
</code></pre>
<p>hcl-dx-image-processor-image-v1.6.0_20210305-1758.tar.gz</p>
<pre><code>
    -   ```
hcl-dx-openldap-image-v1.0.0-master_20210305_1614986151.tar.gz
</code></pre>
<pre><code>-   ```
</code></pre>
<p>hcl-dx-postgres-image-v1.6.0_20210305-1800.tar.gz</p>
<pre><code>
    -   ```
hcl-dx-redis-image-5.0.1.tar.gz
</code></pre>
<pre><code>-   ```
</code></pre>
<p>hcl-dx-remote-search-image-v95_CF192_20210305-1758.tar.gz</p>
<pre><code>
    -   ```
hcl-dx-ringapi-image-v1.6.0_20210305-1802.tar.gz
</code></pre>
<ol>
<li>
<p>Log in to your Microsoft Azure AKS platform.</p>
<p>For more information, refer to the <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli">Microsoft Azure documentation</a> if the Microsoft Azure CLI needs to be installed.</p>
<p>Example log in command:</p>
<p><code>az login</code></p>
<p><strong>Example:</strong></p>
<p><img alt="Log in to your Microsoft Azure AKS platform" src="../images/Log%20in%20to%20your%20Microsoft%20Azure%20AKS%20platform.png" /></p>
</li>
<li>
<p>Create a resource group in Microsoft Azure using the following command:</p>
<p><code>az group create --name &lt;resourceGroupName&gt; --location &lt;region&gt;</code></p>
<p><strong>Example:</strong></p>
<p><img alt="Create a resource group in Azure" src="../images/Create%20a%20resource%20group%20in%20Azure.png" /></p>
<p><strong>Azure Console Example:</strong></p>
<p><img alt="Create resource group in Azure Console" src="../images/Azure%20Console%20create%20resource.png" /></p>
<p>For more information, refer to the <a href="https://docs.microsoft.com/en-us/cli/azure/group?view=azure-cli-latest#az_group_create">Microsoft Azure documentation on Resource</a>.</p>
</li>
<li>
<p>Create a Microsoft Azure Container Registry (ACR) to push the HCL DX 9.5 CF192 and later container images to.</p>
<p><strong>Azure Console Example:</strong></p>
<p><img alt="Create a Microsoft Azure Container Registry" src="../images/Create%20a%20Microsoft%20Azure%20Container%20Registry.png" /></p>
<p>Once the ACR gets created, log in using the following command:</p>
<p><code>az acr login --name &lt;containerRegistry&gt;</code></p>
<p><strong>Example:</strong></p>
<p><img alt="Azure Container Registry" src="../images/Azure%20Container%20Registry%20-%20log%20in.png" /></p>
<p>For more information, refer to the <a href="https://docs.microsoft.com/en-us/cli/azure/acr?view=azure-cli-latest#az_acr_create">Microsoft Azure documentation on Container Registry</a>.</p>
</li>
<li>
<p>Set up the NFS server.</p>
<p>Provide the <strong>HCL DX 9.5 CF192</strong> and later Docker image access to the volume mount created in order to copy the profile.</p>
<p>There are various ways to do this, and NFS is one option. If NFS is used, here are the parameters that have been tested to work:</p>
<ul>
<li>
<p><strong><code>rw</code></strong></p>
<p>Default.</p>
</li>
<li>
<p><strong><code>sync</code></strong></p>
<p>Default after NFS 1.0, means that the server does not reply until after the commit.</p>
</li>
<li>
<p><strong><code>insecure</code></strong></p>
<p>Requires requests originate on ports less than 1024. **</p>
</li>
<li>
<p><strong><code>root_squash</code></strong></p>
<p>Map requests to the nobody user.**</p>
</li>
<li>
<p><strong><code>Hard</code></strong></p>
<p>Required because this means the system keeps trying to write until it works.**</p>
</li>
<li>
<p><strong><code>nfsvers=4.1</code></strong></p>
</li>
<li>
<p><strong><code>rsize=8388608</code></strong></p>
<p>Avoids dropped packages, default 8192.</p>
</li>
<li>
<p><strong><code>wsize=8388608</code></strong></p>
<p>Avoids dropped packages, default 8192</p>
</li>
<li>
<p><strong><code>timeo=600</code></strong></p>
<p>60 seconds.</p>
</li>
<li>
<p><strong><code>retrans=2</code></strong></p>
<p>Number of retries after a time out.</p>
</li>
<li>
<p><strong><code>noresvport</code>**</strong></p>
<p>Tells the NFS client to use a new Transmission Control Protocol (TCP) source port when a network connection is reestablished. Doing this helps make sure that the EFS file system has uninterrupted availability after a network recovery event.</p>
</li>
</ul>
<p><strong>Note:</strong></p>
<ul>
<li>Those marked with (**) are critical and, in many cases, it is recommended to have the <code>rsize</code> and <code>wsize</code> set to 8388608.
For more information, refer to the <a href="https://docs.microsoft.com/en-us/cli/azure/storage/account?view=azure-cli-latest#az_storage_account_create">Microsoft Azure documentation on Storage</a>.</li>
</ul>
</li>
<li>
<p>Configure the Microsoft Azure Kubernetes cluster. To configure <code>kubectl</code> to connect to your Kubernetes cluster, use the <code>az aks get-credentials</code> command.</p>
<p><strong>Example:</strong></p>
<p><code>az aks get-credentials --resource-group &lt;resourcegroup&gt; --name &lt;clusterName&gt;</code></p>
<p><img alt="Configure the Microsoft Azure Kubernetes Cluster" src="../images/Configure%20the%20Microsoft%20Azure%20Kubernetes%20Cluster.png" /></p>
<p>For more information, refer to the <a href="https://docs.microsoft.com/en-us/cli/azure/aks?view=azure-cli-latest#az_aks_create">Microsoft Azure documentation on Cluster</a>.</p>
</li>
</ol>
<h2 id="dx-container-image-management">DX-Container Image Management</h2>
<ol>
<li>
<p>Change directory.</p>
<p>Open a terminal window and change to the root directory of the extracted package.</p>
</li>
<li>
<p>Docker load, tag and push by using the following commands:</p>
<ul>
<li>
<p><strong>List Docker images</strong></p>
<p><code>docker images</code></p>
</li>
<li>
<p><strong>Docker load</strong></p>
<p>Load the containers into your Docker repository:</p>
<p><code>docker load -i hcl-dx-core-image-v95_CF192_20210225-035822.tar.gz</code></p>
<p><code>docker load -i hcl-dx-ambassador-image-154.tar.gz</code></p>
<p><code>docker load -i hcl-dx-cloud-operator-image-v95_CF192_20210225-0546.tar.gz</code></p>
<p><code>docker load -i hcl-dx-redis-image-5.0.1.tar.gz</code></p>
</li>
<li>
<p><strong>ACR details</strong></p>
<p>To tag and push the images to ACR, obtain login server details:</p>
<p><code>az acr list --resource-group &lt;resourceGroup&gt; --query "[].{acrLoginServer:loginServer}" --output table</code></p>
<p><img alt="MS Azure Container Registry (ACR) details" src="../images/MS%20Azure%20Container%20Registry%20(ACR)%20details.png" /></p>
</li>
<li>
<p><strong>Docker tag</strong></p>
<p>Tag your images using the <code>tag</code> command as shown in the examples below:</p>
<p><code>docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</code></p>
<p><strong>Example:</strong></p>
<p><code>docker tag hcl/dx/core:v95_CF192_20210225-035822 YOUR_CONTAINER.azurecr.io/hcl/dx/core:v95_CF192_20210225-035822</code></p>
<p><code>docker tag hcl/dx/cloud-operator:v95_CF192_20210225-0546-YOUR_CONTAINER.azurecr.io/hcl/dx/cloud-operator:v95_CF192_20210225-0546</code></p>
<p><code>docker tag hcl/dx/ambassador:YOUR_CONTAINER.azurecr.io/hcl/dx/ambassador:154</code></p>
<p><code>docker tag hcl/dx/redis:5.0.1 YOUR_CONTAINER.azurecr.io/hcl/dx/redis:5.0.1</code></p>
</li>
<li>
<p><strong>Docker push</strong></p>
<p>Push the images to ACR using the following <code>push</code> command:</p>
<p><code>docker push [OPTIONS] NAME[:TAG]</code></p>
<p><strong>Example commands:</strong></p>
<p><code>docker push YOUR_CONTAINER.azurecr.io/hcl/dx/core:v95_CF192_20210225-035822</code></p>
<p><code>docker push YOUR_CONTAINER.azurecr.io/hcl/dx/cloud-operator:v95_CF192_20210225-0546</code></p>
<p><code>docker push YOUR_CONTAINER.azurecr.io/hcl/dx/ambassador:154</code></p>
<p><code>docker push YOUR_CONTAINER.azurecr.io/hcl/dx/redis:5.0.1</code></p>
</li>
</ul>
<p>Once the images are pushed, they can be listed using the commands below, or through use of the Microsoft Azure Kubernetes platform console.</p>
<p><strong>Command Example:</strong></p>
<p><code>az acr repository list --name &lt;acrName&gt; --output table</code></p>
<p><strong>Microsoft Azure AKS Console - DX 9.5 example:</strong></p>
<p><img alt="Microsoft Azure AKS Console - DX 9.5 example" src="../images/Microsoft%20Azure%20AKS%20Console%20example.png" /></p>
</li>
</ol>
<h2 id="dx-deployment-using-dxctl">DX-Deployment using <code>dxctl</code></h2>
<ol>
<li>
<p>Create a <code>StorageClass</code>.</p>
<p><strong>Sample StorageClass YAML:</strong></p>
<p>```
kind: StorageClass
apiVersion: storage.k8s.io/v1
metadata:
  name: dx-deploy-stg
provisioner: example.com/nfs</p>
<p>```</p>
</li>
<li>
<p>Create a Persistence Volume (pv) with <code>AccessMode</code> as ReadWriteMany and reclaim policy as Retain.</p>
<p><strong>Sample PV YAML:</strong></p>
<p><code>apiVersion: v1
kind: PersistentVolume
metadata:
  name: blrcaps-core-3
spec:
  capacity:
    storage: 100Gi
  accessModes:
  - ReadWriteMany
  nfs:
    path: NFS_PATH
    server: NFS_SERVER
  persistentVolumeReclaimPolicy: Retain
  storageClassName: dx-deploy-stg
  mountOptions:
    - hard
    - nfsvers=4.1
    - rsize=10485760
    - wsize=10485760
    - timeo=600
    - retrans=2
    - noresvport</code></p>
<p><strong>Note:</strong> Make sure the <code>PV</code> is available. If it is not, remove <code>claimRef:</code> from the YAML file.</p>
</li>
<li>
<p>Log in to the cluster.</p>
<p>Before using the <code>dxctl</code> tool to deploy, you must be logged in to the targeted cluster using the cloud platform specific CLI (Red Hat OpenShift, Amazon EKS, Microsoft Azure AKS, Google GKE).</p>
<p><strong>Example:</strong></p>
<p><code>az login</code></p>
</li>
<li>
<p>Download <code>dxctl</code>.</p>
<p>Instructions for downloading the latest packages are available <a href="https://support.hcltechsw.com/csm?id=kb_article&amp;sysparm_article=KB0077878&amp;sys_kb_id=2cde06a31b885494c48197d58d4bcbe2">here</a>.</p>
<p>Once downloaded and extracted, the <code>hcl-dx-cloud-scripts</code> directory structure is as follows:</p>
<p><img alt="Download dxctl" src="../images/Download%20dxctl.png" /></p>
<p>For more information about <code>dxctl</code>, visit the following documentation <a href="https://pages.git.cwp.pnp-hcl.com/Team-Q/documentation/docs/containerization/dxctl_tool">here</a>.</p>
</li>
<li>
<p>Configure and deploy using the HCL DX <code>dcxtl</code> tool.</p>
<p>To start, change to the extracted files directory using the following command:</p>
<p><code>cd hcl-dx-cloud-scripts</code></p>
<p>Using DX Container Update CF192 and later, the directory structure appears as follows:</p>
<p><img alt="dxctl directory structure" src="../images/dxctl%20directory%20structure.png" /></p>
</li>
<li>
<p>Configure the <code>dxctl</code> properties for the DX 9.5 Container CF192 and later deployment.</p>
<p>Copy one of the provided properties files to further modify for your deployment. The modified properties file can be used for the deployment and the same file must be used for further updates.</p>
<p><strong>Example:</strong></p>
<p><code>mkdir -p /home/$USER/deployments/</code></p>
<p><code>cp dxctl/properties/full-deployment.properties /home/$USER/deployments/myfirst_deployment.properties</code></p>
<p>Then, update the <code>dxctl</code> properties file values.</p>
<p><strong>Sample values:</strong></p>
<p><code>dx.namespace: endgametest-jeet1
dx.image: dxen
dx.tag: v95_CF192_20210225-035822_rohan_release_95_CF192_60374773
dx.storageclass:dx-deploy-stg
dx.volume: jeet3
dx.volume.size:100
remote.search.enabled:false
openldap.enabled:false
api.enabled: false
composer.enabled: false
dam.enabled: false
ingress.image:dx-build-output/common/ambassador
ingress.tag:1.5.4
ingress.redis.image:redis
ingress.redis.tag:5.0.1
dx.operator.image: dx-build-output/hcldx-cloud-operator/hcldx-cloud-operator
dx.operator.tag: v95_CF192_20210225-0546_xxxxxxxxx_95_CF192</code></p>
<p><strong>Important:</strong> With HCL DX 9.5 Container Update CF197 and later, dam.features in full-deployment properties is added for use in a future container update release, and should not be modified except with direct guidance from HCL Support.</p>
<p><strong>Note:</strong> With HCL DX 9.5 Container Update CF193 and later, persist.force.read in full-deployment properties is added to enable a read-only Postgres pod for Digital Asset Management. This enables a failover capability for the Postgres service supporting DAM. Another option to enable a read-only pod is to set the persist.minreplicas: option set to greater than 1.</p>
<p>Example:</p>
<p><img alt="" src="../images/Container_deploy_miscosoft_azur.png" /></p>
</li>
<li>
<p>Deploy using <code>dxctl</code>.</p>
<p>Run the following command to deploy HCL DX 9.5 Container Update CF192 and later to Microsoft Azure AKS:</p>
<p><code>./mac/dxctl --deploy -p /home/$USER/deployments/myfirst_deployment.properties</code></p>
<p><strong>Example:</strong></p>
<p><img alt="Deploy using dxctl" src="../images/Deploy%20using%20dxctl.png" /></p>
<p><strong>Note:</strong> This set of steps result in a deployment being created.</p>
</li>
<li>
<p>Validate the deployment.</p>
<p>Make sure all the pods are "Running" and in "Ready" state on your Microsoft Azure AKS platform, as shown in the example below:</p>
<p><img alt="Validate the deployment" src="../images/Validate%20the%20deployment.png" /></p>
</li>
</ol>
<h2 id="generate-tls-certificate">Generate TLS Certificate</h2>
<p>Create a TLS certification to be used by the deployment. Prior to this step, create a self-signed certificate to enable HTTPS using the following command:</p>
<pre><code>openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -subj '/CN=ambassador-cert' -nodes 
</code></pre>
<p>Then, store the Certificate and Key in a Kubernetes Secret using the following command:</p>
<pre><code>kubectl create secret tls dx-tls-cert --cert=cert.pem --key=key.pem -n &lt;YourNamespace&gt;
</code></pre>
<p>Afterward, access the HCL DX 9.5 CF192 and later container deployment. To do so, obtain the external IP from the container platform Load balancer to access the HCL DX 9.5 deployment, as shown in the example below:</p>
<pre><code>$ kubectl get all -n NAMESPACE
</code></pre>
<p><img alt="Access the HCL DX 9.5 CF192 or higher container deployment" src="../images/Access%20the%20HCL%20DX%209.5%20CF192%20or%20higher%20container%20deployment.png" /></p>
<p>Then run the next command:</p>
<pre><code>https://EXTERNAL_IP/wps/portal
</code></pre>
<p><img alt="The HCL DX 9.5 Woodburn Studio demo site" src="../images/The%20HCL%20DX%209.5%20Woodburn%20Studio%20demo%20site%20dxctl%20deployment.png" title="The HCL DX 9.5 Woodburn Studio demo site" /></p>
<p><strong>Note:</strong> It is required to ensure the Microsoft Azure AKS load balancer configured permits external access. Consult the <a href="https://docs.microsoft.com/en-us/azure/load-balancer/load-balancer-overview">Microsoft Azure documentation for Load Balancer setup and default configuration details</a>.</p>
<h2 id="update-the-hcl-digital-experience-dx-95-azure-aks-deployment-to-later-hcl-dx-95-container-update-releases">Update the HCL Digital Experience (DX) 9.5 Azure AKS deployment to later HCL DX 9.5 Container Update releases</h2>
<p>To update the deployment to later <a href="../containerization/docker.html">HCL DX 9.5 Container Update</a> releases, follow these steps:</p>
<ol>
<li>
<p>Update the deployment properties file with new image values, and run the <code>Update</code> command.</p>
<p><strong>Note:</strong> If the properties file is not available, then execute the following command to generate one.</p>
<p><code>./win/dxctl --getproperties  --dx.namespace &lt;Your Namespace&gt;</code></p>
<p><strong>Example:</strong></p>
<p><img alt="Update the deployment profile" src="../images/Update%20the%20deployment%20properties%20file.png" /></p>
<p><strong>On Mac:</strong></p>
<p><code>./mac/dxctl --update -p properties/myfirst_deployment.properties</code></p>
<p><strong>Example:</strong></p>
<p><img alt="" src="../images/To%20update%20the%20deployment%20to%20later%20HCL%20DX%209.5%20Container%20Update%20-%20Mac.png" /></p>
<p><strong>On Windows:</strong></p>
<p><code>.\win\dxctl.exe --update -p properties\myfirst_deployment.properties</code></p>
<p><strong>On Linux:</strong></p>
<p><code>./linux/dxctl -–update -p properties/myfirst_deployment.properties</code></p>
</li>
</ol>
<p><strong>Additional considerations:</strong> For example, once the database is transferred, the <code>DBTYPE</code> must be updated so you can scale the instances higher. Additionally, once the database is transferred, the number of replicas could be increased. There are additional options to <a href="../containerization/customizing_container_deployment.html">customize the deployment</a>.</p>
<h2 id="delete-the-hcl-digital-experience-dx-95-cf192-and-later-release-azure-aks-deployment">Delete the HCL Digital Experience (DX) 9.5 CF192 and later release Azure AKS deployment</h2>
<p>To delete the deployment, follow one of two methods:</p>
<p><strong>Method 1:</strong> Remove the deployment but allow for redeployment with the same volumes using the following command:</p>
<pre><code>./linux/dxctl --destroy -p properties/myfirst_deployment.properties
</code></pre>
<p><strong>Method 2:</strong> Remove the entire namespace/project using the following command:</p>
<pre><code>./linux/dxctl --destroy -p properties/myfirst_deployment.properties -all true
</code></pre>
<p><strong>Example:</strong></p>
<p><img alt="Remove namespace/project" src="../images/Remove%20the%20entire%20namespace-project.png" /></p>
<p>If some resources like services are still not deleted, run the following command:</p>
<pre><code>kubectl patch services $(kubectl get services -n $NAMESPACE  | grep -v &quot;NAME&quot; |awk  '{print $1}') -p '{&quot;metadata&quot;:{&quot;finalizers&quot;:null}}' -n $NAMESPACE
</code></pre>
<h2 id="deploying-hcl-digital-experience-dx-95-cf191-and-earlier-version">Deploying HCL Digital Experience (DX) 9.5 CF191 and earlier version</h2>
<p>Follow these steps to deploy the HCL Digital Experience (DX) 9.5 CF191 and earlier container version to the Microsoft Azure AKS platform:</p>
<ol>
<li>
<p>Download and extract the contents of the HCL DX 9.5 CF182 package to the local file system.</p>
<p><img alt="" src="../images/container_eks_load_02.png" title="Download and extract example" /></p>
</li>
<li>
<p>In Microsoft Azure Kubernetes Service (AKS), load, tag, and push the HCL Digital Experience images into your MS Azure Container Registries.</p>
<p><strong>Note:</strong> In Microsoft Azure, when using AKS a single Container Registry, or multiple Container Registries may be used. See the <a href="https://docs.microsoft.com/en-us/azure/container-registry/container-registry-concepts">Microsoft Azure Container Registry documentation</a> for additional information about this topic.</p>
<p>In this example, 10 Container Registries are created:</p>
<p><img alt="" src="../images/containerization_aks_container_registries.png" title="Create Container Registries example for HCL DX 9.5 Docker images" /></p>
<p>As an alternative, DX Administrators can use a single or fewer registries and create 'Repositories' within.</p>
<p>In this example, a Container Registry named azambassador with a repository 'ambassador' is shown:</p>
<p><img alt="" src="../images/containerization_aks_ambassador_repository.png" title="Sample Container Registry azambassador" /></p>
<p>Administrators can tag and push another image into this Container Registry to get a second repository.</p>
<p><img alt="" src="../images/containerization_aks_container_tag_push.png" title="azambassador Repository" /></p>
<p>In the following example, the Ambassador Redis image is added:</p>
<p><img alt="" src="../images/containerization_aks_ambassador_redis_image.png" title="Ambassador Redis image" /></p>
<p>The HCL DX 9.5 Container deployment does not assume 1, or many registries are defined, and either definition setup works. In the following example, the HCL DX 9.5 Redis 5.0.1 image is added to the azambassador Container Registry. This example shows loading the HCL DX 9.5 CF181 and earlier container into a local repository, tagging it and pushing it to the azuredxen Container Registry in the dxen ‘Repository’.</p>
<p><img alt="" src="../images/containerization_aks_azuredxen_repository.png" title="azuredxen Container Registry" /></p>
</li>
</ol>
<h2 id="install-the-hcl-digital-experience-dx-95-cf182-and-later-core-images">Install the HCL Digital Experience (DX) 9.5 CF182 and later core images</h2>
<ol>
<li>
<p>Load the HCL DX 9.5 CF182 and later images to your deployment. The following example uses the CF183 version in the load command:</p>
<p><code>Docker load -I hcl-dx-core-image-v95_CF183_20200819-1159.tar.gz</code></p>
<p><img alt="" src="../images/containerization_aks_docker_load_command.png" title="Docker load" /></p>
</li>
<li>
<p>Docker tag and docker push to the Azure environment:</p>
<p><img alt="" src="../images/containerization_aks_docker_tag_push_azure.png" title="Docker tag and push" /></p>
<p>Once complete, the image is viewable in the Microsoft Azure repository:</p>
<p><img alt="" src="../images/containerization_aks_view_azuredxen_repository.png" title="azuredxen Repository" /></p>
<p><strong>Reminder</strong>: Consult the <strong><a href="docker.md">HCL Digital Experience 9.5 Deployment – Docker</a></strong> topic for the latest list of HCL DX 9.5 container files that are available.</p>
<p>HCL DX 9.5 Container Update CF183 files are used in these examples:</p>
<p><code>CF183-core.zip files</code></p>
<ul>
<li><code>HCL DX notices V9.5 CF183.txt</code></li>
<li><code>hcl-dx-ambassador-image-154.tar.gz</code></li>
<li><code>hcl-dx-cloud-operator-image-v95_CF183_20200818-1852.tar.gz</code></li>
<li><code>hcl-dx-cloud-scripts-v95_CF183_20200818-1852.zip</code></li>
<li><code>hcl-dx-core-image-v95_CF183_20200818-1342.tar.gz</code></li>
<li>
<p><code>hcl-dx-redis-image-5.0.1.tar.gz</code>
<code>CF183-other.zip files</code></p>
</li>
<li>
<p><code>HCL DX notices V9.5 CF183.txt</code></p>
</li>
<li><code>hcl-dx-content-composer-image-v1.2.0_20200818-1343.tar.gz</code></li>
<li><code>hcl-dx-digital-asset-management-operator-image-v95_CF183_20200818-1344.tar.gz</code></li>
<li><code>hcl-dx-digital-asset-manager-image-v1.2.0_20200818-1346.tar.gz</code></li>
<li><code>hcl-dx-image-processor-image-v1.2.0_20200818-1345.tar.gz</code></li>
<li><code>hcl-dx-openldap-image-v1.0.0-master_20200818_1597758965.tar.gz</code></li>
<li><code>hcl-dx-postgres-image-v1.2.0_20200818-1349.tar.gz</code></li>
<li><code>hcl-dx-remote-search-image-v95_CF183_20200818-1342.tar.gz</code></li>
<li>
<p><code>hcl-dx-ringapi-image-v1.2.0_20200818-1351.tar.gz</code>
To install HCL Digital Experience 9.5 core software to Microsoft Azure AKS, the following images are required:</p>
</li>
<li>
<p><code>hcl-dx-cloud-operator-image-v95</code></p>
</li>
<li><code>hcl-dx-core-image-v95</code></li>
<li><code>hcl-dx-ambassador-image</code></li>
<li><code>hcl-dx-redis-image</code>
Images included in the ‘other’ package are optional and used to support use of OpenLDAP, Remote Search, the Experience API, Content Composer, and Digital Asset Management components and services.</li>
</ul>
<p>See examples that show how to load HCL DX 9.5 images to MS Azure below.</p>
<p>In the following example, the items are loaded into the <strong><em>azuredxen</em></strong> Content Registry and multiple repositories are created. Images are tagged with dx-183 reflecting the HCL DX 9.5 Container Update CF183 version images used in this deployment.</p>
<p><img alt="" src="../images/containerization_aks_version_images.png" title="Loaded items in azuredxen" /></p>
</li>
<li>
<p>At this stage, the ./deploy/operator.yaml needs to be properly updated and the operator, and Redis image details need to be provided:</p>
<ol>
<li>
<p>First, replace the line:</p>
<p>From: ‘image: <strong>REPOSITORY_NAME</strong>/hcldx-cloud-operator:9.5.next’</p>
<p>To: Add the proper value for the deployment, as in the following example:</p>
<p><code>‘image: azuredxen.azurecr.io/hcldx-cloud-operator:v95_CF183_20200819-1711’</code></p>
</li>
<li>
<p>Next, replace the values: "REDIS_REPO","REDIS_IMG_ENV",“REDIS_TAG_ENV” with proper values. See the following example:</p>
<p><img alt="" src="../images/containerization_aks_redis_repo.png" title="Redis repository values" /></p>
</li>
<li>
<p>Reviewing the Azure dashboard, administrators can see the following for redis:</p>
<p><img alt="" src="../images/containerization_aks_azuredxen_repository_dashboard.png" title="Azure dashboard" /></p>
</li>
</ol>
</li>
<li>
<p>Deploy the Custom Resource Definition using the scripts/deployCrd.sh file. See the following example:</p>
<p><img alt="" src="../images/containerization_aks_custom_resource_definition.png" title="Custom Resource Definition deployment" /></p>
<p><strong>Important</strong>: Ensure there is an available persistent volume for the deployment or a self-provisioning storage class. The HCL DX Help Center topic (<a href="../sample_storage_class_volume/">Sample Storage Class and Volume for HCL Digital Experience 9.5 Container Deployments</a>) can be referenced for related guidance.</p>
<p>In this example, a storage class named dx-deploy-stg and a volume dxdeployhave been created:</p>
<p><img alt="" src="../images/containerization_aks_storage_class.png" title="dxdeploy volume" /></p>
</li>
<li>
<p>Run the deployment scripts as follows:</p>
<p><code>./scripts/deployDx.sh az-demo 1 azuredxen.azurecr.io dxen v95_CF183_20200819-1159 dxeploy dx-deploy-stg derby ambassador 154</code></p>
<ul>
<li><strong>NAMESPACE</strong> - the project or the namespace to create or use for deployment.</li>
<li><strong>REPLICAS</strong> - the number of initial instances for the deployment.</li>
<li><strong>REPOSITORY</strong> - your local repository, the repository used by Kubernetes.</li>
<li><strong>IMAGENAME</strong> - the name of the dxCore image, as added to the repository above.</li>
<li><strong>IMAGETAG</strong> - the tag for the target image as added to the repository above.</li>
<li><strong>VOLUMENAME</strong> - the volume to be used by the deployment for persistence, this must use <strong>AccessMode</strong> <strong>ReadWriteMany</strong>.</li>
<li><strong>STORAGECLASS</strong> - the storage class name used to create the persistent volume.</li>
<li><strong>DBTYPE</strong> - the database type. By default, and initially, this is Derby. HCL DX 9.5 uses Apache Derby, Oracle Database, IBM DB2, or Microsoft SQL Server. Acceptable values are <code>derby</code>, <code>oracle</code>, <code>db2</code>, or <code>msSql</code>.</li>
<li><strong>INGRESSIMAGE</strong> - The image name to use for Ambassador.</li>
<li><strong>INGRESSTAG</strong> - The image tag to use for Ambassador.
The command output shows the values as they align with the deployment, and the result of each step.</li>
</ul>
<p>DX Administrators can use <code>‘kubectl get pods -n az-emo’</code> to check the pods as they are starting. See the following example:</p>
<p><img alt="" src="../images/containerization_aks_custom_resource_definition_02.png" title="kubectl get pods" /></p>
<p><img alt="" src="../images/containerization_aks_pods.png" title="Checking the pods" /></p>
</li>
<li>
<p>While waiting for the pods to start up DX Administrators must create a tls secret for ambassador as follows:</p>
<p><code>kubectl create secret tls dx-tls-cert --cert=my-cert.pem --key=my-key.pem -n aws-mynamespace</code></p>
<p><img alt="" src="../images/containerization_aks_create_secret_tls.png" title="Create secret TLS" /></p>
<p>In this example, an existing key and certification created using OpenSSL was used.</p>
<ul>
<li>Using SSL, administrators can create a private key: <code>'openssl genrsa -out my-key.pem 2048'</code></li>
<li>Using OpenSSL, administrators can create a certificate signed by the private key: <code>'openssl req -x509 -key my-key.pem -out my-cert.pem -days 365 -subj '/CN=my-cert'</code>
At this stage, the deployment writes out the wp_profile into the persistent volume, and configure HCL DX 9.5 a minimum default configuration. See the HCL DX 9.5 Container <a href="../limitations_requirements/">Requirements</a> and <a href="../customization/">Customization</a> topics for additional information.</li>
</ul>
</li>
<li>
<p>Once the HCL DX 9.5 dx-deployment-0 pod is running, administrators can access the HCL DX 9.5 deployment by obtaining the ambassador service details. Command examples to obtain this information:</p>
<ul>
<li><code>‘kubectl get svc -n az-demo’</code> or</li>
<li>
<p><code>‘kubectl get svc ambassador -n az-demo’</code></p>
<p><img alt="" src="../images/containerization_aks_kubectl_get.png" title="kubectl get" /></p>
</li>
</ul>
</li>
<li>
<p>Using the external IP address obtained via the kubectl get command (<code>https://external-ip/wps/portal</code>), select the resulting URL obtained to access your HCL DX 9.5 deployment.</p>
<p><img alt="" src="../images/containerization_aks_external_ip.png" title="External IP" /></p>
<p><strong>Note:</strong> It is required to ensure the MS Azure AKS load balancer configured permits external access. For more information, refer to the <a href="https://docs.microsoft.com/en-us/azure/load-balancer/load-balancer-overview">MS Azure documentation for Load Balancer setup</a> for the default configuration details.</p>
</li>
</ol>
<h2 id="optional-deploy-the-openldap-experience-api-content-composer-and-digital-asset-management-components-to-microsoft-aks">(Optional) Deploy the OpenLDAP, Experience API, Content Composer, and Digital Asset Management components to Microsoft AKS</h2>
<ol>
<li>
<p>Create a config map with the same name as the DX statefulset used to deploy the HCL DX 9.5 CF182 and later Core image software. By default, the DX statefulset is dx-deployment, as shown in this example:</p>
<p><img alt="" src="../images/containerization_aks_dxstatefulset.png" title="DX statefulset" /></p>
<p><code>kubectl create configmap dx-deployment -n az-demo</code></p>
<p><img alt="" src="../images/containerization_aks_configmap.png" title="Create configmap" /></p>
</li>
<li>
<p>Once created, populate it with the following data:</p>
<p>```
data:</p>
<p>dx.deploy.openldap.enabled: 'true'
  dx.deploy.openldap.tag: dx-183
  dx.deploy.openldap.image: dx-openldap
  dx.deploy.experienceapi.enabled: 'true'
  dx.deploy.experienceapi.tag: dx-183
  dx.deploy.experienceapi.image: ring-api
  dx.deploy.contentui.enabled: 'true'
  dx.deploy.contentui.tag: dx-183
  dx.deploy.contentui.image: content-ui
  dx.deploy.dam.enabled: 'true'
  dx.deploy.dam.volume: releaseml
  dx.deploy.dam.storageclass: dx-deploy-stg
  dx.deploy.dam.persistence.tag: dx-183
  dx.deploy.dam.persistence.image: persist
  dx.deploy.dam.imgprocessor.tag: dx-183
  dx.deploy.dam.imgprocessor.image: image-processor
  dx.deploy.dam.tag: dx-183
  dx.deploy.dam.image: dam
  dx.deploy.dam.operator.tag: dx-183
  dx.deploy.dam.operator.image: hcl-dam-operator
  dx.deploy.host.override: “false”</p>
<p>```</p>
<p>Administrators can also create the config map in a YAML file and deploy it with the following instructions (example): <code>kubectl create -f my_config_map.yaml -n az-demo</code>.</p>
</li>
<li>
<p>After creating the config map, the HCL DX 9.5 CF182 and later deployment goes into ‘<em>init’</em> mode, and restart a couple of times after the new options are configured. Administrators can check the status via the command line using the command (example) <code>kubectl get pods -n az-demo</code>:</p>
<p><img alt="" src="../images/containerization_aks_get_pods.png" title="get pods" /></p>
<p>As an alternative approach, administrators can check the status of the deployment progress through the MS Azure AKS dashboard:</p>
<p><img alt="" src="../images/containerization_aks_azure_dashboard.png" title="Microsoft AKS dashboard" /></p>
</li>
<li>
<p>In this deployment of HCL DX 9.5 core and optional images, the DX core image is the last container to start successfully. Note that it restarts twice.</p>
</li>
<li>
<p>Once restarts are complete, administrators can confirm the deployment and configuration of the DX core and OpenLDAP, Experience API, Content Composer, and Digital Asset Management images as follows:</p>
<p>OpenLDAP image deployment validation:</p>
<ol>
<li>
<p>Navigate to <strong>Practitioner Studio</strong> > <strong>Administration</strong> > <strong>Security</strong> > <strong>Users and Groups</strong>, and search for all available groups:</p>
<p><img alt="" src="../images/containerization_aks_openldap_validation.png" title="Searching for available groups" /></p>
<p>The group <strong>ldap_test_users</strong> should appear in this listing.</p>
</li>
<li>
<p>To validate the Content Composer and Experience API image deployments, navigate to <strong>Practitioner Studio</strong> > <strong>Web Content</strong> > <strong>Content Composer</strong>:</p>
</li>
</ol>
</li>
</ol>
<p><img alt="" src="../images/containerization_aks_content_composer_validation.png" title="Content Composer validation" /></p>
<pre><code>3.  To validate the Digital Asset Management and Experience API image deployments, navigate to **Practitioner Studio** \&gt; **Digital Assets**:

    ![](../images/containerization_aks_dam_validation.png "DAM validation")

4.  To validate access to the Experience API, administrators and developers should be able to access the Experience API at the following URL:

    ```
    https://external-ip/dx/api/core/v1/explorer/
    ```

See the following section for additional information:

-   [Install Experience API, Content Composer, and Digital Asset Management](install_config_cc_dam.md)
</code></pre>
<h2 id="update-the-hcl-digital-experience-dx-95-azure-aks-deployment">Update the HCL Digital Experience (DX) 9.5 Azure AKS deployment</h2>
<p>To update the deployment to later <a href="docker.md">HCL DX 9.5 Container Update</a> releases, follow these steps:</p>
<ol>
<li>
<p><strong>Note:</strong> If using HCL DX 9.5 Container Update CF192 and later, the <a href="../dxtools_dxctl/">dxctl</a>tool can be used to Update the deployment.</p>
<p>The dxctl tool does not deploy or update the DxDeployment custom resource definition. Prior to running an Update process, administrators should check the DxDeployment custom resource definition (<code>hcl-dx-cloud-scripts/deploy/crds/git.cwp.pnp-hcl.com_dxdeployments_crd.yaml</code>) for changes and update accordingly:</p>
<ul>
<li>
<p><strong>Kubernetes command:</strong></p>
<p><code>kubectl delete crd dxdeployments.git.cwp.pnp-hcl.com</code></p>
<p>CAUTION:</p>
<p>Since <code>crd</code> is a cluster-wide resource, the use of <code>kubectl delete crd dxdeployments.git.cwp.pnp-hcl.com</code> causes a service outage for all the <strong>dx-deployment</strong> across the cluster.</p>
</li>
<li>
<p><strong>Kubernetes command:</strong></p>
<p><code>kubectl create -f deploy/crds/git.cwp.pnp-hcl.com_dxdeployments_crd.yaml</code></p>
</li>
</ul>
</li>
<li>
<p>To update the deployment, run the <code>updateDx.sh</code> script with updated values:</p>
<p><code>./scripts/updateDx.sh NAMESPACE REPLICAS REPOSITORY IMAGENAME IMAGETAG VOLUMENAME STORAGECLASS DBTYPE INGRESSIMAGE INGRESSTAG</code></p>
<ul>
<li><strong>NAMESPACE</strong> - the project or the namespace to create or use for deployment.</li>
<li><strong>REPLICAS</strong> - the number of initial instances for the deployment.</li>
<li><strong>REPOSITORY</strong> - your local repository, the repository used by Kubernetes.</li>
<li><strong>IMAGENAME</strong> - the name of the dxCore image, as added to the repository above.</li>
<li><strong>IMAGETAG</strong> - the tag for the target image as added to the repository above.</li>
<li><strong>VOLUMENAME</strong> - the volume to be used by the deployment for persistence, this must use <strong>AccessMode</strong> <strong>ReadWriteMany</strong>.</li>
<li><strong>STORAGECLASS</strong> - the storage class name used to create the persistent volume.</li>
<li><strong>DBTYPE</strong> - the database type. By default, and initially, this is Derby. HCL DX 9.5 uses Apache Derby, Oracle Database, IBM DB2, or Microsoft SQL Server. Acceptable values are <code>derby</code>, <code>oracle</code>, <code>db2</code>, or <code>msSql</code>.</li>
<li><strong>INGRESSIMAGE</strong> - The image name to use for Ambassador (Native K8s).</li>
<li>
<p><strong>INGRESSTAG</strong> - The image tag to use for Ambassador (Native K8s).</p>
<p>For example:</p>
<p><code>./scripts/UpdateDx.sh az-demo 1 azuredxen.azurecr.io dxen v95_CF183_20200819-1159 dxeploy dx-deploy-stg derby ambassador 154</code></p>
<p><img alt="" src="../images/container_aks_update.png" title="AKS Azure Update" /></p>
</li>
</ul>
</li>
<li>
<p>Once the database is transferred, the <strong>DBTYPE</strong> needs to be updated so you can scale the instances higher. Additionally, once the database is transferred, the number of replicas could be increased.</p>
<p>See <a href="../customization/">Customizing your Container deployment</a> for more information on customizing your deployment.</p>
</li>
</ol>
<h2 id="delete-the-hcl-digital-experience-dx-95-azure-aks-deployment">Delete the HCL Digital Experience (DX) 9.5 Azure AKS deployment</h2>
<ol>
<li>
<p>Removing the entire deployment requires several steps, this is by design.</p>
<ul>
<li>
<p>To remove the deployment in a specific namespace, run the <code>removeDx.sh</code> script:</p>
<p><code>./scripts/removeDx.sh **NAMESPACE**</code></p>
<ul>
<li><strong>NAMESPACE</strong> - the project or the namespace created or used for deployment.</li>
<li>To remove a namespace, use any of the following commands:<ul>
<li>Kubernetes command:</li>
</ul>
</li>
</ul>
<p><code>'kubectl delete -f dxNameSpace_**NAMESPACE**.yaml'</code></p>
<p>where <strong>NAMESPACE</strong> is the namespace to be removed</p>
</li>
</ul>
</li>
<li>
<p>The persistent volume associated to the deployment needs to be cleaned up by your Administrator. To reuse a persistent volume, see the following steps:</p>
<ul>
<li>
<p>Open the persistent volume in a visual editor (vi) using the</p>
<ul>
<li>
<p>Kubernetes command:</p>
<p><code>kubectl edit pv &lt;pv_name&gt;</code></p>
</li>
</ul>
</li>
<li>
<p>Remove the <code>claimRef</code> section:</p>
<p><code>claimRef:
   apiVersion: v1
   kind: PersistentVolumeClaim
   name: dx-deploy-pvc
   namespace: az-demo
   resourceVersion: "488931120"
   uid: ebd58361-0e2a-11ea-b02e-02f8fe687954</code></p>
</li>
<li>
<p>Ensure you get the <code>'persistentvolume/&lt;pv_name&gt; edited'</code> message.</p>
</li>
<li>You may need to manually remove any data remaining from the previous deployment.</li>
</ul>
</li>
</ol>
<p><strong>Parent topic:</strong><a href="../deploy_supported_container_platforms/">HCL Digital Experience 9.5 Container Deployment</a></p>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
 

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.indexes", "navigation.top", "navigation.instant", "search.highlight", "search.share", "search.suggest"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.8aa65030.min.js"></script>
      
    
  </body>
</html>